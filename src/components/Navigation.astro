---
function clearPathname(pathname) {
	const lastDotIndex = pathname.lastIndexOf(".");
	if (lastDotIndex !== -1) {
		return pathname.substring(0, lastDotIndex);
	}
	if (pathname[pathname.length - 1] === "/") {
		return pathname.substring(0, pathname.length - 1);
	}
	return pathname;
}

const pathname = new URL(Astro.request.url).pathname;
const cleanPathname = clearPathname(pathname);
---

<nav>
	<ul>
		<li>
			<a class={"/about" === cleanPathname ? "active" : ""} href="/about"
				>About</a
			>
		</li>
		<li>
			<a
				class={["/films", ""].includes(cleanPathname) ? "active" : ""}
				href="/films">Films</a
			>
		</li>
		<li>
			<a class={"/contacts" === cleanPathname ? "active" : ""} href="/contacts">
				Contacts
			</a>
		</li>
	</ul>
</nav>

<style>
	nav {
		width: 100%;
		background-color: black;
		position: sticky;
		top: 0;
		z-index: 1000;
	}

	nav ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
		overflow: hidden;
	}

	nav ul li {
		float: left;
	}

	nav ul li a {
		display: block;
		padding: 20px;
		text-decoration: none;
		color: white;
		text-transform: uppercase;
		@media screen and (max-width: 640px) {
			padding: 16px;
		}
	}

	nav ul li a:hover,
	nav ul li a:focus,
	nav ul li a.active {
		color: #fac711;
	}
</style>
