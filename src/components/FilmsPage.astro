---
import Film from "./Film.astro";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const films = await getCollection("films");
---

<Layout>
	<div class="films-container">
		{
			films.map((film) => {
				return (
					<Film
						href={`/films/${film.slug.split("/")[1]}`}
						img={film.data.previewImg as ImageMetadata}
						trailerGif={film.data.trailerGif as ImageMetadata}
					/>
				);
			})
		}
	</div>
</Layout>
<style>
	.films-container {
		display: grid;
		grid-template-columns: repeat(3, auto);
		grid-auto-rows: max-content;
		gap: 20px;
		justify-content: space-evenly;
		@media screen and (max-width: 960px) {
			grid-template-columns: repeat(2, auto);
		}
		@media screen and (min-width: 960px) {
			padding: 0px 16px;
		}
		@media screen and (max-width: 640px) {
			gap: 16px;
		}
	}
</style>
